-- Auto Put Item with Loop - Simple Mobile GUI
local Player = game:GetService("Players").LocalPlayer
local PlayerGui = Player:WaitForChild("PlayerGui")

-- Create ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "AutoPutGUI"
screenGui.Parent = PlayerGui

-- Create main frame (simple design)
local mainFrame = Instance.new("Frame")
mainFrame.Name = "MainFrame"
mainFrame.Size = UDim2.new(0, 220, 0, 300)
mainFrame.Position = UDim2.new(0.5, -110, 0.5, -150)
mainFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 35)
mainFrame.BorderSizePixel = 0
mainFrame.Parent = screenGui

-- Add subtle corner rounding
local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 6)
corner.Parent = mainFrame

-- Add slight shadow effect
local shadow = Instance.new("UIStroke")
shadow.Color = Color3.fromRGB(60, 60, 80)
shadow.Thickness = 2
shadow.Parent = mainFrame

-- Simple title bar
local titleBar = Instance.new("Frame")
titleBar.Name = "TitleBar"
titleBar.Size = UDim2.new(1, 0, 0, 35)
titleBar.Position = UDim2.new(0, 0, 0, 0)
titleBar.BackgroundColor3 = Color3.fromRGB(35, 35, 50)
titleBar.BorderSizePixel = 0
titleBar.Parent = mainFrame

local titleCorner = Instance.new("UICorner")
titleCorner.CornerRadius = UDim.new(0, 6, 0, 0)
titleCorner.Parent = titleBar

-- Title text
local title = Instance.new("TextLabel")
title.Name = "Title"
title.Text = "Auto Put"
title.Size = UDim2.new(0.6, 0, 1, 0)
title.Position = UDim2.new(0.05, 0, 0, 0)
title.BackgroundTransparency = 1
title.TextColor3 = Color3.fromRGB(220, 220, 220)
title.Font = Enum.Font.GothamMedium
title.TextSize = 16
title.TextXAlignment = Enum.TextXAlignment.Left
title.Parent = titleBar

-- Main toggle button (simplified)
local toggleButton = Instance.new("TextButton")
toggleButton.Name = "ToggleButton"
toggleButton.Size = UDim2.new(0.9, 0, 0, 45)
toggleButton.Position = UDim2.new(0.05, 0, 0, 45)
toggleButton.BackgroundColor3 = Color3.fromRGB(180, 60, 60)
toggleButton.Text = "START"
toggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
toggleButton.Font = Enum.Font.GothamMedium
toggleButton.TextSize = 16
toggleButton.Parent = mainFrame

local toggleCorner = Instance.new("UICorner")
toggleCorner.CornerRadius = UDim.new(0, 4)
toggleCorner.Parent = toggleButton

-- Simple info display
local infoFrame = Instance.new("Frame")
infoFrame.Name = "InfoFrame"
infoFrame.Size = UDim2.new(0.9, 0, 0, 45)
infoFrame.Position = UDim2.new(0.05, 0, 0, 100)
infoFrame.BackgroundColor3 = Color3.fromRGB(35, 35, 45)
infoFrame.BorderSizePixel = 0
infoFrame.Parent = mainFrame

local infoCorner = Instance.new("UICorner")
infoCorner.CornerRadius = UDim.new(0, 4)
infoCorner.Parent = infoFrame

-- Current item display
local currentItemLabel = Instance.new("TextLabel")
currentItemLabel.Name = "CurrentItemLabel"
currentItemLabel.Size = UDim2.new(1, 0, 0.5, 0)
currentItemLabel.Position = UDim2.new(0, 0, 0, 0)
currentItemLabel.BackgroundTransparency = 1
currentItemLabel.Text = "Item: Novus"
currentItemLabel.TextColor3 = Color3.fromRGB(180, 180, 220)
currentItemLabel.Font = Enum.Font.Gotham
currentItemLabel.TextSize = 14
currentItemLabel.TextXAlignment = Enum.TextXAlignment.Center
currentItemLabel.Parent = infoFrame

-- Count display
local countLabel = Instance.new("TextLabel")
countLabel.Name = "CountLabel"
countLabel.Size = UDim2.new(1, 0, 0.5, 0)
countLabel.Position = UDim2.new(0, 0, 0.5, 0)
countLabel.BackgroundTransparency = 1
countLabel.Text = "Count: 0"
countLabel.TextColor3 = Color3.fromRGB(150, 150, 150)
countLabel.Font = Enum.Font.Gotham
countLabel.TextSize = 12
countLabel.TextXAlignment = Enum.TextXAlignment.Center
countLabel.Parent = infoFrame

-- Items selection (simplified grid)
local itemsFrame = Instance.new("Frame")
itemsFrame.Name = "ItemsFrame"
itemsFrame.Size = UDim2.new(0.9, 0, 0, 125)
itemsFrame.Position = UDim2.new(0.05, 0, 0, 160)
itemsFrame.BackgroundColor3 = Color3.fromRGB(35, 35, 45)
itemsFrame.BorderSizePixel = 0
itemsFrame.Parent = mainFrame

local itemsCorner = Instance.new("UICorner")
itemsCorner.CornerRadius = UDim.new(0, 4)
itemsCorner.Parent = itemsFrame

-- Item options (now includes Shadow)
local itemOptions = {
    "Angelic",
    "Ardor", 
    "Boreal",
    "Elgion",
    "Garra",
    "Hellion",
    "Novus",
    "Shadow",  -- New item added
    "Verdant"
}

-- Currently selected item
local selectedItem = "Novus"

-- Create grid of item buttons (3 columns)
local buttonSize = 30
local buttonSpacing = 5
local columns = 3

for i, itemName in ipairs(itemOptions) do
    local col = (i - 1) % columns
    local row = math.floor((i - 1) / columns)
    
    local itemButton = Instance.new("TextButton")
    itemButton.Name = itemName .. "Button"
    itemButton.Size = UDim2.new(0, buttonSize, 0, buttonSize)
    itemButton.Position = UDim2.new(0, 10 + (col * (buttonSize + buttonSpacing)), 
                                    0, 10 + (row * (buttonSize + buttonSpacing)))
    
    -- Color coding for different items
    local buttonColor
    if itemName == "Angelic" then buttonColor = Color3.fromRGB(255, 255, 200)
    elseif itemName == "Ardor" then buttonColor = Color3.fromRGB(255, 100, 100)
    elseif itemName == "Boreal" then buttonColor = Color3.fromRGB(100, 200, 255)
    elseif itemName == "Elgion" then buttonColor = Color3.fromRGB(200, 100, 255)
    elseif itemName == "Garra" then buttonColor = Color3.fromRGB(255, 150, 50)
    elseif itemName == "Hellion" then buttonColor = Color3.fromRGB(255, 50, 50)
    elseif itemName == "Novus" then buttonColor = Color3.fromRGB(100, 200, 100)
    elseif itemName == "Shadow" then buttonColor = Color3.fromRGB(40, 40, 60)  -- Dark color for Shadow
    elseif itemName == "Verdant" then buttonColor = Color3.fromRGB(50, 200, 100)
    else buttonColor = Color3.fromRGB(80, 120, 200) end
    
    if itemName == selectedItem then
        itemButton.BackgroundColor3 = buttonColor
        itemButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    else
        itemButton.BackgroundColor3 = buttonColor
        itemButton.BackgroundTransparency = 0.6
        itemButton.TextColor3 = Color3.fromRGB(200, 200, 200)
    end
    
    -- Show first 3 letters for compact display
    itemButton.Text = string.sub(itemName, 1, 3)
    itemButton.Font = Enum.Font.GothamMedium
    itemButton.TextSize = 11
    itemButton.Parent = itemsFrame
    
    local buttonCorner = Instance.new("UICorner")
    buttonCorner.CornerRadius = UDim.new(0, 4)
    buttonCorner.Parent = itemButton
    
    -- Full name tooltip on hover
    local tooltip = Instance.new("TextLabel")
    tooltip.Name = "Tooltip"
    tooltip.Text = itemName
    tooltip.Size = UDim2.new(0, 60, 0, 20)
    tooltip.Position = UDim2.new(0, -5, 1, 5)
    tooltip.BackgroundColor3 = Color3.fromRGB(20, 20, 30)
    tooltip.TextColor3 = Color3.fromRGB(220, 220, 220)
    tooltip.Font = Enum.Font.Gotham
    tooltip.TextSize = 10
    tooltip.Visible = false
    tooltip.Parent = itemButton
    
    local tooltipCorner = Instance.new("UICorner")
    tooltipCorner.CornerRadius = UDim.new(0, 3)
    tooltipCorner.Parent = tooltip
    
    -- Show tooltip on hover
    itemButton.MouseEnter:Connect(function()
        tooltip.Visible = true
    end)
    
    itemButton.MouseLeave:Connect(function()
        tooltip.Visible = false
    end)
    
    -- Button click event
    itemButton.MouseButton1Click:Connect(function()
        selectedItem = itemName
        currentItemLabel.Text = "Item: " .. selectedItem
        
        -- Update all button colors
        for _, optionName in ipairs(itemOptions) do
            local btn = itemsFrame:FindFirstChild(optionName .. "Button")
            if btn then
                if optionName == selectedItem then
                    btn.BackgroundTransparency = 0
                    btn.TextColor3 = Color3.fromRGB(255, 255, 255)
                else
                    btn.BackgroundTransparency = 0.6
                    btn.TextColor3 = Color3.fromRGB(200, 200, 200)
                end
            end
        end
    end)
end

-- Simple control buttons
local closeButton = Instance.new("TextButton")
closeButton.Name = "CloseButton"
closeButton.Size = UDim2.new(0, 25, 0, 25)
closeButton.Position = UDim2.new(1, -30, 0, 5)
closeButton.BackgroundColor3 = Color3.fromRGB(60, 60, 80)
closeButton.Text = "✕"
closeButton.TextColor3 = Color3.fromRGB(220, 220, 220)
closeButton.Font = Enum.Font.GothamMedium
closeButton.TextSize = 14
closeButton.Parent = titleBar

local closeCorner = Instance.new("UICorner")
closeCorner.CornerRadius = UDim.new(0, 4)
closeCorner.Parent = closeButton

-- Minimize button
local minimizeButton = Instance.new("TextButton")
minimizeButton.Name = "MinimizeButton"
minimizeButton.Size = UDim2.new(0, 25, 0, 25)
minimizeButton.Position = UDim2.new(1, -60, 0, 5)
minimizeButton.BackgroundColor3 = Color3.fromRGB(60, 60, 80)
minimizeButton.Text = "─"
minimizeButton.TextColor3 = Color3.fromRGB(220, 220, 220)
minimizeButton.Font = Enum.Font.GothamMedium
minimizeButton.TextSize = 14
minimizeButton.Parent = titleBar

local minimizeCorner = Instance.new("UICorner")
minimizeCorner.CornerRadius = UDim.new(0, 4)
minimizeCorner.Parent = minimizeButton

-- Minimized version (simple bar)
local minimizedBar = Instance.new("Frame")
minimizedBar.Name = "MinimizedBar"
minimizedBar.Size = UDim2.new(0, 120, 0, 30)
minimizedBar.Position = UDim2.new(0, 10, 0, 10)
minimizedBar.BackgroundColor3 = Color3.fromRGB(35, 35, 50)
minimizedBar.BorderSizePixel = 0
minimizedBar.Visible = false
minimizedBar.Parent = screenGui

local minimizedCorner = Instance.new("UICorner")
minimizedCorner.CornerRadius = UDim.new(0, 4)
minimizedCorner.Parent = minimizedBar

local minimizedLabel = Instance.new("TextLabel")
minimizedLabel.Name = "MinimizedLabel"
minimizedLabel.Size = UDim2.new(0.7, 0, 1, 0)
minimizedLabel.Position = UDim2.new(0.05, 0, 0, 0)
minimizedLabel.BackgroundTransparency = 1
minimizedLabel.Text = "Auto Put: Stopped"
minimizedLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
minimizedLabel.Font = Enum.Font.Gotham
minimizedLabel.TextSize = 12
minimizedLabel.TextXAlignment = Enum.TextXAlignment.Left
minimizedLabel.Parent = minimizedBar

local expandButton = Instance.new("TextButton")
expandButton.Name = "ExpandButton"
expandButton.Size = UDim2.new(0, 25, 0, 25)
expandButton.Position = UDim2.new(1, -30, 0, 2)
expandButton.BackgroundColor3 = Color3.fromRGB(60, 60, 80)
expandButton.Text = "□"
expandButton.TextColor3 = Color3.fromRGB(220, 220, 220)
expandButton.Font = Enum.Font.GothamMedium
expandButton.TextSize = 12
expandButton.Visible = false
expandButton.Parent = minimizedBar

local expandCorner = Instance.new("UICorner")
expandCorner.CornerRadius = UDim.new(0, 4)
expandCorner.Parent = expandButton

-- Make windows draggable
local dragging = false
local dragStart = nil
local startPos = nil

local function updateDrag(input, frame)
    local delta = input.Position - dragStart
    frame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, 
                               startPos.Y.Scale, startPos.Y.Offset + delta.Y)
end

-- Main frame drag
titleBar.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.Touch then
        dragging = true
        dragStart = input.Position
        startPos = mainFrame.Position
    end
end)

titleBar.InputChanged:Connect(function(input)
    if dragging and input.UserInputType == Enum.UserInputType.Touch then
        updateDrag(input, mainFrame)
    end
end)

titleBar.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.Touch then
        dragging = false
    end
end)

-- Minimized bar drag
minimizedBar.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.Touch then
        dragging = true
        dragStart = input.Position
        startPos = minimizedBar.Position
    end
end)

minimizedBar.InputChanged:Connect(function(input)
    if dragging and input.UserInputType == Enum.UserInputType.Touch then
        updateDrag(input, minimizedBar)
    end
end)

minimizedBar.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.Touch then
        dragging = false
    end
end)

-- Toggle functions
local function minimizeGUI()
    mainFrame.Visible = false
    minimizedBar.Visible = true
    expandButton.Visible = true
end

local function expandGUI()
    mainFrame.Visible = true
    minimizedBar.Visible = false
    expandButton.Visible = false
end

-- Button events
minimizeButton.MouseButton1Click:Connect(minimizeGUI)
expandButton.MouseButton1Click:Connect(expandGUI)

closeButton.MouseButton1Click:Connect(function()
    isRunning = false
    screenGui:Destroy()
end)

-- Auto-put variables
local isRunning = false
local putCount = 0
local remotePath = game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("WardenOffering")

-- Update minimized status
local function updateMinimizedStatus()
    if minimizedBar.Visible then
        if isRunning then
            minimizedLabel.Text = selectedItem .. ": " .. putCount
            minimizedLabel.TextColor3 = Color3.fromRGB(100, 200, 100)
        else
            minimizedLabel.Text = "Auto Put: Stopped"
            minimizedLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
        end
    end
end

-- Toggle function
toggleButton.MouseButton1Click:Connect(function()
    if isRunning then
        -- Stop
        isRunning = false
        toggleButton.Text = "START"
        toggleButton.BackgroundColor3 = Color3.fromRGB(180, 60, 60)
    else
        -- Start
        isRunning = true
        toggleButton.Text = "STOP"
        toggleButton.BackgroundColor3 = Color3.fromRGB(60, 180, 60)
        
        -- Reset counter
        putCount = 0
        countLabel.Text = "Count: 0"
        
        -- Start auto-putting
        spawn(function()
            while isRunning do
                local args = {selectedItem}
                
                local success, result = pcall(function()
                    return remotePath:InvokeServer(unpack(args))
                end)
                
                if success then
                    putCount += 1
                    countLabel.Text = "Count: " .. putCount
                    print("[" .. selectedItem .. "] placed " .. putCount .. " times")
                    
                    updateMinimizedStatus()
                else
                    warn("Error:", result)
                end
                
                wait(1) -- CHANGED FROM 0.5 TO 1 SECOND
            end
        end)
    end
    
    updateMinimizedStatus()
end)

print("Simple Auto Put GUI loaded!")
print("Items: " .. table.concat(itemOptions, ", "))
print("Drag the title bar to move the window")









-- Auto Carcass Farm Script - Fixed Version
-- Execute with your executor

if not game:IsLoaded() then
    game.Loaded:Wait()
end

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Workspace = game:GetService("Workspace")

local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoidRootPart = character:WaitForChild("HumanoidRootPart")

-- Check for remotes
local FoodChunkRemote
local FoodPickupRemote

if ReplicatedStorage:FindFirstChild("Remotes") then
    if ReplicatedStorage.Remotes:FindFirstChild("FoodChunk") then
        FoodChunkRemote = ReplicatedStorage.Remotes.FoodChunk
    end
    if ReplicatedStorage.Remotes:FindFirstChild("FoodPickup") then
        FoodPickupRemote = ReplicatedStorage.Remotes.FoodPickup
    end
end

-- If remotes not found, wait for them
if not FoodChunkRemote then
    FoodChunkRemote = ReplicatedStorage:WaitForChild("Remotes"):WaitForChild("FoodChunk")
end

if not FoodPickupRemote then
    FoodPickupRemote = ReplicatedStorage:WaitForChild("Remotes"):WaitForChild("FoodPickup")
end

-- Create GUI
local ScreenGui = Instance.new("ScreenGui")
local MainFrame = Instance.new("Frame")
local Title = Instance.new("TextLabel")
local StatusLabel = Instance.new("TextLabel")
local ToggleButton = Instance.new("TextButton")
local CloseButton = Instance.new("TextButton")

ScreenGui.Name = "AutoCarcassFarmGUI"
ScreenGui.Parent = game:GetService("CoreGui") or player:WaitForChild("PlayerGui")

MainFrame.Name = "MainFrame"
MainFrame.Size = UDim2.new(0, 300, 0, 200)
MainFrame.Position = UDim2.new(0.5, -150, 0.5, -100)
MainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 40)
MainFrame.BorderSizePixel = 2
MainFrame.BorderColor3 = Color3.fromRGB(0, 170, 255)
MainFrame.Active = true
MainFrame.Draggable = true
MainFrame.Parent = ScreenGui

Title.Name = "Title"
Title.Size = UDim2.new(1, 0, 0, 30)
Title.Position = UDim2.new(0, 0, 0, 0)
Title.BackgroundColor3 = Color3.fromRGB(20, 20, 30)
Title.Text = "Auto Carcass Farm"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.Font = Enum.Font.GothamBold
Title.TextSize = 18
Title.Parent = MainFrame

StatusLabel.Name = "StatusLabel"
StatusLabel.Size = UDim2.new(1, -20, 0, 50)
StatusLabel.Position = UDim2.new(0, 10, 0, 40)
StatusLabel.BackgroundTransparency = 1
StatusLabel.Text = "Status: Ready\nCarcasses: 0"
StatusLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
StatusLabel.Font = Enum.Font.Gotham
StatusLabel.TextSize = 14
StatusLabel.TextXAlignment = Enum.TextXAlignment.Left
StatusLabel.TextYAlignment = Enum.TextYAlignment.Top
StatusLabel.Parent = MainFrame

ToggleButton.Name = "ToggleButton"
ToggleButton.Size = UDim2.new(0.6, 0, 0, 40)
ToggleButton.Position = UDim2.new(0.2, 0, 0.6, 0)
ToggleButton.BackgroundColor3 = Color3.fromRGB(0, 120, 215)
ToggleButton.Text = "START FARMING"
ToggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ToggleButton.Font = Enum.Font.GothamBold
ToggleButton.TextSize = 16
ToggleButton.Parent = MainFrame

CloseButton.Name = "CloseButton"
CloseButton.Size = UDim2.new(0, 30, 0, 30)
CloseButton.Position = UDim2.new(1, -30, 0, 0)
CloseButton.BackgroundColor3 = Color3.fromRGB(255, 60, 60)
CloseButton.Text = "X"
CloseButton.TextColor3 = Color3.fromRGB(255, 255, 255)
CloseButton.Font = Enum.Font.GothamBold
CloseButton.TextSize = 16
CloseButton.Parent = MainFrame

-- Farming variables
local isFarming = false
local processedCarcasses = {}
local lastDetectionTime = 0
local teleportDelay = 1.5 -- Changed to 1.5 seconds

local function getRandomOffset()
    -- Generate random offset between -2 and 2 on X and Z axes
    return Vector3.new(
        math.random(-200, 200) / 100, -- -2 to 2
        5, -- Always 5 units above
        math.random(-200, 200) / 100  -- -2 to 2
    )
end

local function getCarcassPath(carcass)
    -- Get the full path of the carcass for tracking
    local path = ""
    local parent = carcass
    
    while parent and parent ~= Workspace do
        path = parent.Name .. "/" .. path
        parent = parent.Parent
    end
    
    return "Workspace/" .. path .. carcass.Name
end

local function findCarcasses()
    local carcasses = {}
    processedCarcasses = {}
    
    -- Check if the food folder exists
    local success, foodFolder = pcall(function()
        return Workspace.Interactions.Food
    end)
    
    if success and foodFolder then
        -- First, check for regular "Carcass"
        local carcass = foodFolder:FindFirstChild("Carcass")
        if carcass then
            -- Check if it's a model/part or a folder
            if carcass:IsA("Model") or carcass:IsA("BasePart") then
                local path = getCarcassPath(carcass)
                table.insert(carcasses, {Object = carcass, Name = "Carcass", Path = path})
            elseif carcass:IsA("Folder") then
                -- If it's a folder, get all parts inside
                for _, item in pairs(carcass:GetChildren()) do
                    if item:IsA("BasePart") then
                        local path = getCarcassPath(item)
                        table.insert(carcasses, {Object = item, Name = "Carcass", Path = path})
                    end
                end
            end
        end
        
        -- Check for special carcasses
        local specialCarcasses = {
            "Carnivore Carcass",
            "Herbivore Carcass", 
            "NPC Carcass",
            "Omnivore Carcass"
        }
        
        for _, carcassName in pairs(specialCarcasses) do
            local carcass = foodFolder:FindFirstChild(carcassName)
            if carcass then
                if carcass:IsA("Model") or carcass:IsA("BasePart") then
                    local path = getCarcassPath(carcass)
                    table.insert(carcasses, {Object = carcass, Name = carcassName, Path = path})
                elseif carcass:IsA("Folder") then
                    for _, item in pairs(carcass:GetChildren()) do
                        if item:IsA("BasePart") then
                            local path = getCarcassPath(item)
                            table.insert(carcasses, {Object = item, Name = carcassName, Path = path})
                        end
                    end
                end
            end
        end
        
        -- Alternative: Search for any parts in the Food folder
        for _, item in pairs(foodFolder:GetChildren()) do
            if item:IsA("BasePart") and string.find(item.Name:lower(), "carcass") then
                local path = getCarcassPath(item)
                table.insert(carcasses, {Object = item, Name = item.Name, Path = path})
            elseif item:IsA("Model") then
                -- Check model for parts
                for _, part in pairs(item:GetChildren()) do
                    if part:IsA("BasePart") then
                        local path = getCarcassPath(part)
                        table.insert(carcasses, {Object = part, Name = item.Name, Path = path})
                        break
                    end
                end
            end
        end
    else
        print("Food folder not found at: workspace.Interactions.Food")
    end
    
    return carcasses
end

local function getCarcassPosition(carcass)
    if carcass:IsA("BasePart") then
        return carcass.Position
    elseif carcass:IsA("Model") then
        -- Try to get primary part or first part
        if carcass.PrimaryPart then
            return carcass.PrimaryPart.Position
        else
            for _, part in pairs(carcass:GetChildren()) do
                if part:IsA("BasePart") then
                    return part.Position
                end
            end
        end
    end
    return nil
end

local function teleportTo(position, isNewCarcass)
    if humanoidRootPart and position then
        -- Check if character exists
        if not character or not character.Parent then
            character = player.Character or player.CharacterAdded:Wait()
            humanoidRootPart = character:WaitForChild("HumanoidRootPart")
        end
        
        -- Add random offset only for newly detected carcasses
        local teleportPosition = position
        if isNewCarcass then
            teleportPosition = position + getRandomOffset()
            print("New carcass detected - teleporting with random offset")
        else
            teleportPosition = position + Vector3.new(0, 5, 0)
        end
        
        humanoidRootPart.CFrame = CFrame.new(teleportPosition)
        return true
    end
    return false
end

local function pickupCarcass(carcassName, carcassObject)
    if string.find(carcassName:lower(), "carcass") then
        -- Check if it's regular carcass
        if carcassName == "Carcass" then
            -- Regular carcass
            if FoodChunkRemote then
                local args = {carcassObject}
                local success, result = pcall(function()
                    return FoodChunkRemote:InvokeServer(unpack(args))
                end)
                if success then
                    print("✓ Picked up Carcass")
                    return true
                end
            end
        else
            -- Special carcasses
            if FoodPickupRemote then
                local args = {carcassObject}
                local success, result = pcall(function()
                    return FoodPickupRemote:InvokeServer(unpack(args))
                end)
                if success then
                    print("✓ Picked up " .. carcassName)
                    return true
                end
            end
        end
    end
    return false
end

local function farmLoop()
    while isFarming do
        -- Update character reference if needed
        if not character or not character.Parent then
            character = player.Character or player.CharacterAdded:Wait()
            humanoidRootPart = character:WaitForChild("HumanoidRootPart")
        end
        
        -- Find carcasses
        local carcasses = findCarcasses()
        StatusLabel.Text = string.format("Status: Farming\nCarcasses Found: %d", #carcasses)
        
        if #carcasses > 0 then
            print("Found " .. #carcasses .. " carcass(es)")
            
            for _, carcassData in pairs(carcasses) do
                if not isFarming then break end
                
                local carcass = carcassData.Object
                if carcass and carcass.Parent then
                    -- Check if this carcass is new (not in processed list)
                    local isNewCarcass = not processedCarcasses[carcassData.Path]
                    
                    -- Get position
                    local position = getCarcassPosition(carcass)
                    if position then
                        -- Teleport to carcass
                        print("Teleporting to " .. carcassData.Name .. "...")
                        local teleported = teleportTo(position, isNewCarcass)
                        
                        if teleported then
                            -- Wait the teleport delay (1.5 seconds)
                            task.wait(teleportDelay)
                            
                            -- Try to pick up carcass
                            local picked = pickupCarcass(carcassData.Name, carcass)
                            if picked then
                                print("Successfully picked up " .. carcassData.Name)
                                -- Mark as processed
                                processedCarcasses[carcassData.Path] = true
                            else
                                print("Failed to pick up " .. carcassData.Name)
                            end
                        end
                    end
                end
            end
        else
            print("No carcasses found in workspace.Interactions.Food")
            -- Clear processed list when no carcasses found
            processedCarcasses = {}
        end
        
        task.wait(3) -- Wait before searching again
    end
end

local function toggleFarming()
    isFarming = not isFarming
    
    if isFarming then
        ToggleButton.Text = "STOP FARMING"
        ToggleButton.BackgroundColor3 = Color3.fromRGB(215, 60, 0)
        StatusLabel.Text = "Status: Starting farm..."
        
        -- Start farming in a separate coroutine
        coroutine.wrap(function()
            farmLoop()
        end)()
        
        print("Auto Carcass Farming STARTED")
        print("Teleport delay: " .. teleportDelay .. " seconds")
    else
        ToggleButton.Text = "START FARMING"
        ToggleButton.BackgroundColor3 = Color3.fromRGB(0, 120, 215)
        StatusLabel.Text = "Status: Stopped\nCarcasses: 0"
        
        -- Clear processed list when stopping
        processedCarcasses = {}
        
        print("Auto Carcass Farming STOPPED")
    end
end

-- Button events
ToggleButton.MouseButton1Click:Connect(toggleFarming)
CloseButton.MouseButton1Click:Connect(function()
    isFarming = false
    ScreenGui:Destroy()
    print("GUI Closed")
end)

-- Auto-rejoin if character dies
player.CharacterAdded:Connect(function(newChar)
    character = newChar
    humanoidRootPart = newChar:WaitForChild("HumanoidRootPart")
end)

-- Keybind (optional - press F to toggle)
local UIS = game:GetService("UserInputService")
UIS.InputBegan:Connect(function(input, gameProcessed)
    if input.KeyCode == Enum.KeyCode.F and not gameProcessed then
        toggleFarming()
    end
end)

-- Debug function to test the path
local function testPath()
    print("Testing workspace.Interactions.Food path...")
    local success, foodFolder = pcall(function()
        return Workspace.Interactions.Food
    end)
    
    if success and foodFolder then
        print("✓ Food folder found!")
        print("Children in Food folder:")
        for _, child in pairs(foodFolder:GetChildren()) do
            print("  - " .. child.Name .. " (" .. child.ClassName .. ")")
        end
    else
        print("✗ Food folder not found at workspace.Interactions.Food")
        print("Available paths:")
        if Workspace:FindFirstChild("Interactions") then
            for _, child in pairs(Workspace.Interactions:GetChildren()) do
                print("  - " .. child.Name)
            end
        end
    end
end

-- Run test
coroutine.wrap(testPath)()

print("========================================")
print("Auto Carcass Farm Script Loaded!")
print("Path: workspace.Interactions.Food")
print("Teleport Delay: " .. teleportDelay .. " seconds")
print("Controls:")
print("1. Use GUI buttons")
print("2. Press F key to toggle farming")
print("3. GUI is draggable")
print("4. New carcasses will have random teleport offset")
print("========================================")
